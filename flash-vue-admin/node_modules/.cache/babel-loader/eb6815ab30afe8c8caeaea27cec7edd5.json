{"remainingRequest":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\github\\ziyuanwendang\\flash-vue-admin\\src\\components\\Tinymce\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\src\\components\\Tinymce\\index.vue","mtime":1649735864000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\babel.config.js","mtime":1649735864000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _utils = require(\"@/utils/utils\");\n\nvar _auth = require(\"@/utils/auth\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'EditorSlideUpload',\n  props: {\n    color: {\n      type: String,\n      default: '#1890ff'\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      listObj: {},\n      fileList: [],\n      fileUrl: '',\n      uploadHeaders: {\n        'Authorization': ''\n      }\n    };\n  },\n  created: function created() {\n    this.fileUrl = (0, _utils.getApiUrl)() + '/file';\n    this.uploadHeaders['Authorization'] = (0, _auth.getToken)();\n  },\n  methods: {\n    checkAllSuccess: function checkAllSuccess() {\n      var _this = this;\n\n      return Object.keys(this.listObj).every(function (item) {\n        return _this.listObj[item].hasSuccess;\n      });\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n\n      var arr = Object.keys(this.listObj).map(function (v) {\n        return _this2.listObj[v];\n      });\n\n      if (!this.checkAllSuccess()) {\n        this.$message('请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！');\n        return;\n      }\n\n      this.$emit('successCBK', arr);\n      this.listObj = {};\n      this.fileList = [];\n      this.dialogVisible = false;\n    },\n    handleSuccess: function handleSuccess(response, file) {\n      var uid = file.uid;\n      var objKeyArr = Object.keys(this.listObj);\n\n      for (var i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          this.listObj[objKeyArr[i]].url = this.fileUrl + '/download?idFile=' + response.data.id;\n          this.listObj[objKeyArr[i]].hasSuccess = true;\n          return;\n        }\n      }\n    },\n    handleRemove: function handleRemove(file) {\n      var uid = file.uid;\n      var objKeyArr = Object.keys(this.listObj);\n\n      for (var i = 0, len = objKeyArr.length; i < len; i++) {\n        if (this.listObj[objKeyArr[i]].uid === uid) {\n          delete this.listObj[objKeyArr[i]];\n          return;\n        }\n      }\n    },\n    beforeUpload: function beforeUpload(file) {\n      var _self = this;\n\n      var _URL = window.URL || window.webkitURL;\n\n      var fileName = file.uid;\n      this.listObj[fileName] = {};\n      return new Promise(function (resolve, reject) {\n        var img = new Image();\n        img.src = _URL.createObjectURL(file);\n\n        img.onload = function () {\n          _self.listObj[fileName] = {\n            hasSuccess: false,\n            uid: file.uid,\n            width: this.width,\n            height: this.height\n          };\n        };\n\n        resolve(true);\n      });\n    }\n  }\n};\nexports.default = _default;",null]}