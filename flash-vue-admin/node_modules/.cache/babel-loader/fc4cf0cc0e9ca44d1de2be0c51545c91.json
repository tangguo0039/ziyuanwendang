{"remainingRequest":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\github\\ziyuanwendang\\flash-vue-admin\\src\\views\\account\\profile.js?vue&type=script&lang=js&","dependencies":[{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\src\\views\\account\\profile.js","mtime":1649735864000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\babel.config.js","mtime":1649735864000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\github\\ziyuanwendang\\flash-vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _log = require(\"@/api/system/log\");\n\nvar _user = require(\"@/api/user\");\n\nvar _default = {\n  data: function data() {\n    return {\n      activeName: 'profile',\n      user: {},\n      reverse: false,\n      activities: [],\n      form: {\n        oldPassword: '',\n        password: '',\n        rePassword: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      this.user = this.$store.state.user.profile;\n      this.queryByUser();\n    },\n    handleClick: function handleClick(tab, event) {// this.$router.push({ path: '/account/'+tab.name})\n    },\n    queryByUser: function queryByUser() {\n      var _this = this;\n\n      (0, _log.queryByUser)().then(function (response) {\n        console.log(response);\n        _this.activities = response.data;\n      }).catch(function (err) {\n        _this.$message({\n          message: err,\n          type: 'error'\n        });\n      });\n    },\n    updatePwd: function updatePwd() {\n      var _this2 = this;\n\n      this.$refs['form'].validate(function (valid) {\n        if (valid) {\n          (0, _user.updatePwd)({\n            oldPassword: _this2.form.oldPassword,\n            password: _this2.form.password,\n            rePassword: _this2.form.rePassword\n          }).then(function (response) {\n            _this2.$message({\n              message: '密码修改成功',\n              type: 'success'\n            }); //退出登录，该操作是个异步操作，所以后面跳转到登录页面延迟1s再执行（如果有更好的方法再调整）\n\n\n            _this2.$store.dispatch('user/logout');\n\n            var self = _this2;\n            setTimeout(function () {\n              self.$router.push(\"/login\");\n            }, 1000);\n          }).catch(function (err) {});\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}